Guide Complet - Import et Utilisation de vos Datasets
ğŸ“Š Structure de vos Datasets
Fichiers CSV disponibles

actors.csv

actor_id : Identifiant unique de l'acteur
name : Nom de l'acteur
birth_year : AnnÃ©e de naissance
death_year : AnnÃ©e de dÃ©cÃ¨s (si applicable)
professions : Professions de l'acteur
known_for_titles : Titres connus


series.csv

series_id : Identifiant unique de la sÃ©rie
title : Titre de la sÃ©rie
original_title : Titre original
year : AnnÃ©e de sortie
genres : Genres (sÃ©parÃ©s par des virgules)
is_adult : Contenu adulte (0/1)


genres.csv

genre_id : Identifiant unique du genre
name : Nom du genre


series_genres.csv (Relations)

series_id : ID de la sÃ©rie
genre_name : Nom du genre


series_actors.csv (Relations)

series_id : ID de la sÃ©rie
actor_id : ID de l'acteur


users.csv

user_id : Identifiant unique
name : Nom d'utilisateur
age : Ã‚ge
gender : Genre
occupation : Profession
join_date : Date d'inscription
email : Email




ğŸš€ Ã‰tapes d'Installation et Import
1. PrÃ©parer l'environnement
bash# Installer les dÃ©pendances
pip install django neo4j python-decouple

# CrÃ©er la structure du projet (si pas dÃ©jÃ  fait)
django-admin startproject tv_recommender .
python manage.py startapp accounts
python manage.py startapp recommendations
2. Configurer Neo4j
bash# DÃ©marrer Neo4j Desktop
# VÃ©rifier que le port est 7687
# Noter votre mot de passe
3. Placer vos fichiers CSV
CrÃ©ez un dossier data/ Ã  la racine du projet :
project_neo4j_serie_TV/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ actors.csv
â”‚   â”œâ”€â”€ series.csv
â”‚   â”œâ”€â”€ genres.csv
â”‚   â”œâ”€â”€ series_genres.csv
â”‚   â”œâ”€â”€ series_actors.csv
â”‚   â””â”€â”€ users.csv
â”œâ”€â”€ manage.py
â””â”€â”€ ...
4. Initialiser la base Django
bash# CrÃ©er les migrations
python manage.py makemigrations
python manage.py migrate

# CrÃ©er un superuser (admin)
python manage.py createsuperuser
# Username: admin
# Email: admin@example.com
# Password: (votre choix)
5. Initialiser Neo4j
bash# CrÃ©er les contraintes et index
python manage.py init_neo4j_constraints
6. Importer les donnÃ©es CSV
bash# Import complet (ordre important !)
python manage.py import_csv_data \
    --genres data/genres.csv \
    --actors data/actors.csv \
    --series data/series.csv \
    --series-genres data/series_genres.csv \
    --series-actors data/series_actors.csv \
    --users data/users.csv

# Ou importer avec limite (pour tester)
python manage.py import_csv_data \
    --genres data/genres.csv \
    --actors data/actors.csv --limit 1000 \
    --series data/series.csv --limit 500 \
    --series-genres data/series_genres.csv \
    --series-actors data/series_actors.csv
7. VÃ©rifier l'import
bash# Afficher les statistiques
python manage.py stats_neo4j
8. Synchroniser les utilisateurs Django
bash# Synchroniser les utilisateurs Django vers Neo4j
python manage.py sync_django_to_neo4j
9. Lancer le serveur
bashpython manage.py runserver

ğŸ“ Format des CSV attendu
actors.csv
csvactor_id,name,birth_year,death_year,professions,known_for_titles
nm0000001,Fred Astaire,1899,1987,actor|soundtrack,tt0050419|tt0045537
nm0000002,Lauren Bacall,1924,2014,actress|soundtrack,tt0037382|tt0071877
series.csv
csvseries_id,title,original_title,year,genres,is_adult
tt0903747,Breaking Bad,Breaking Bad,2008,Crime|Drama|Thriller,0
tt0944947,Game of Thrones,Game of Thrones,2011,Action|Adventure|Drama,0
genres.csv
csvgenre_id,name
1,Action
2,Adventure
3,Drama
series_genres.csv
csvseries_id,genre_name
tt0903747,Crime
tt0903747,Drama
tt0944947,Action
series_actors.csv
csvseries_id,actor_id
tt0903747,nm0186505
tt0903747,nm0666739
tt0944947,nm3592338
users.csv
csvuser_id,name,age,gender,occupation,join_date,email
1,alice_tv,28,F,engineer,2024-01-15,alice@example.com
2,bob_series,35,M,teacher,2024-01-20,bob@example.com

ğŸ¯ Architecture Finale
Dans Django (PostgreSQL/SQLite)
python# ModÃ¨le User Django
User:
  - id (PK)              â†’ utilisÃ© comme user_id dans Neo4j
  - username             â†’ utilisÃ© comme name dans Neo4j
  - email                â†’ synchronisÃ© avec Neo4j
  - password (hashÃ©)     â†’ JAMAIS dans Neo4j
  - is_staff             â†’ Permissions admin
  - is_superuser         â†’ Super-admin
  - date_joined          â†’ UtilisÃ© comme join_date dans Neo4j
Dans Neo4j (Base de graphes)
cypher// NÅ“uds
(:User {user_id, name, email, age, gender, occupation, join_date})
(:Series {series_id, title, original_title, year, is_adult})
(:Actor {actor_id, name, birth_year, death_year, professions, known_for_titles})
(:Genre {name})

// Relations
(User)-[:RATED {rating, series_title, date, timestamp}]->(Series)
(Series)-[:HAS_GENRE]->(Genre)
(Series)-[:HAS_ACTOR]->(Actor)

ğŸ”„ Flux de DonnÃ©es
1. Utilisateur s'inscrit
Django User crÃ©Ã©
    â†“
Signal post_save dÃ©clenchÃ©
    â†“
Neo4j User crÃ©Ã© avec user_id = Django User.id
    â†“
Pas de mot de passe dans Neo4j
2. Utilisateur note une sÃ©rie
Utilisateur connectÃ© (Django Auth)
    â†“
user_id = str(request.user.id)
    â†“
Cypher: MATCH (u:User {user_id: $user_id})
        MATCH (s:Series {series_id: $series_id})
        CREATE (u)-[:RATED {rating: $rating}]->(s)
3. Admin crÃ©e une sÃ©rie
Admin connectÃ© (is_staff = True)
    â†“
GÃ©nÃ¨re series_id unique (UUID)
    â†“
Series.create(series_id, title, ...)
    â†“
SÃ©rie crÃ©Ã©e dans Neo4j uniquement
4. Recommandations
user_id = str(request.user.id)
    â†“
Recommendation.hybrid(user_id)
    â†“
Neo4j analyse le graphe
    â†“
Retourne les sÃ©ries recommandÃ©es

ğŸ› ï¸ Commandes Utiles
Import et Gestion
bash# Vider Neo4j (ATTENTION: supprime tout !)
python manage.py clear_neo4j --confirm

# RÃ©initialiser les contraintes
python manage.py init_neo4j_constraints

# Importer seulement les genres
python manage.py import_csv_data --genres data/genres.csv

# Importer avec limite (pour tester)
python manage.py import_csv_data --actors data/actors.csv --limit 100

# Statistiques Neo4j
python manage.py stats_neo4j

# Synchroniser Django â†’ Neo4j
python manage.py sync_django_to_neo4j

# Forcer la mise Ã  jour
python manage.py sync_django_to_neo4j --force
DÃ©veloppement
bash# CrÃ©er un superuser
python manage.py createsuperuser

# Lancer le serveur
python manage.py runserver

# Shell Django (pour tester)
python manage.py shell
